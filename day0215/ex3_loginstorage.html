<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Jua&family=Lobster&family=Nanum+Pen+Script&family=Single+Day&display=swap" rel="stylesheet">
    <style>
       body, body *{
            font-family: 'Single Day';
        }
        div.loginbox table tr{
            height: 40px;
        }

        div.loginbox table *{
            font-size: 20px;
        }
    </style>
    <script>
        window.onload=function(){
            //아이디가 저장된 배열변수
            let memberid=["bit701","angel","happy","nice","java"];
            let memberpw=["1234","0000","1357","9999","8888"];

            

            //처음 로딩시 저장된 아이디와 체크값을 얻는다.
            let loginid=localStorage.loginid;
            let idcheck=localStorage.idcheck;
            //체크값이 만약 true 면 아이디에 값을 넣어주고 체크도 설정한다
            //false면 값을 지우고 체크도 해제한다.
            if(idcheck==null || idcheck=='false'){
                //체크 속성 제거
                document.getElementById("chksave").removeAttribute("checked");
                document.getElementById("chksave").checked=false;
                //아이디도 지우기
                document.getElementById("txtid").value="";}
            else{
                 //체크 속성 추가
                //  document.getElementById("chksave").setAttribute("checked",true);
                 document.getElementById("chksave").checked=true;
                //아이디도 넣기
                document.getElementById("txtid").value=loginid;
            }
            

            //로그인 버튼
            document.getElementById("btnlogin").onclick=function(){
                let id=document.getElementById("txtid").value;
                let pw=document.getElementById("txtpass").value;
                //아이디저장 체크값을 얻는다
                let idcheck=document.getElementById("chksave").checked;


                // if(id=='bit701' && pw=='1234'){
                //     //페이지 이동
                //     location.href="ex1_canvas.html";
                //     //로칼스토리지에 체크값과 아이디를 저장한다.
                //     localStorage.idcheck=idcheck;
                //     localStorage.loginid=id;
                // }else{
                //     alert("아이디 또는 패스워드가 틀렸어요");
                // }
                //배열안에 아이디가 있는지
                let ididx=-1; 
                for(let i=0; i<memberid.length;i++){
                    if(id==memberid[i]){
                        ididx=i;
                        break;
                    }
                }

                //for문안에서 아이디를 못찾았을경우 if문 자체가 실행안되므로 초기값을 그대로 가지고 있다.
                if(ididx==-1){
                    alert("회원이 아닙니다...먼저 회원가입을 해주세요");
                }else{
                    //비번이 맞는지 체크
                    if(pw==memberpw[ididx]){
                        location.href="ex1_canvas.html";
                        //로컬스토리지에 체크값과 이아디를 저장한다.
                        localStorage.idcheck=idcheck
                        localStorage.loginid=id;
                    }
                    else{
                        alert("비번이 맞지 않습니다.")
                    }
                }
            }
        }
        
    </script>
</head>
<body>
    <div class="loginbox">
        <table border="1" style="border-collapse: collapse;">
            <caption><b>회원 로그인</b></caption>
            <tr>
                <th colspan="2">
                    <label>
                        <input type="checkbox" id="chksave">아이디저장
                    </label>
                </th>
            </tr>
            <tr>
                <th bgcolor="lightgray" width="100">아이디</th>
                <td width="200">
                    <input type="text" id="txtid" placeholder="아이디" autofocus>
                </td>
            </tr>
            <tr>
                <th bgcolor="lightgray" width="100">비밀번호</th>
                <td width="200">
                    <input type="password" id="txtpass" placeholder="비밀번호">
                </td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    <button type="button" id="btnlogin">회원로그인</button>
                </td>
            </tr>
        </table>
    </div>
</body>
</html>